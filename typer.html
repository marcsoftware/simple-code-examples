<!DOCTYPE html>
<html>

<meta charset="UTF-8">
<style>

  h6,h5,h4,h3,h2,h1{
    width:100%;
    text-align: center;
    margin: 0px;
    padding:0px;
  }
    div{
        margin: auto;
        width: 50%;
        border: 3px solid white;
        padding: 10px;
        padding:1px;
        margin-top:0px;
        margin-bottom: :1px;
        white-space: pre;
    }



    .line{
        
        width: 75%;
        
        word-wrap: break-word;
    }

    .word{
      
      margin:0px;
      
      outline:none
    }

    input{
      margin-left:10px;
      margin-top:10px;
    }


    textarea{
      width:100%;
    }
</style>
<body>


 <script src="lib.js"></script> 


<script>

//-----------------------------------------------------------------------------
// global variables
//-----------------------------------------------------------------------------    

 file='x';
 ans_key = '';
 var file_name;
 window.onload=init;
//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------
   
function init() {
  const queryString = window.location.search;
  

  const urlParams = new URLSearchParams(queryString);
  
   file_name = (urlParams+"").split("=")[1];
  document.title=file_name;

  page=(getCookie(file_name));
  document.getElementById('input').value=page;
  doGet(file_name);

  

  
}



//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------
function getCookie(cname) {


  return  localStorage.getItem(`${file_name}typer`); 
  
 
  //localStorage.setItem(`${book_name}lineNumber`,pageNumber*PAGE_SIZE );

}

//-----------------------------------------------------------
//
//-----------------------------------------------------------
function hideTyped(number){
  document.getElementById('data').innerHTML=file.slice(number).join("\n").replace(/</g,"&lt;");
}
//-----------------------------------------------------------
//
//-----------------------------------------------------------
function getLineNumber(handle){

  var cursor_index = handle.selectionStart;
  setCookie(handle.value);
   var sub='';
   var line_number;
   sub = handle.value.substring(0,cursor_index);
  try{
      
      line_number=sub.match(/\n/g).length;
  }catch(e){
      line_number=0;
  }

   document.getElementById('lineNumber').innerHTML=line_number+' /'+global_length;

   hideTyped(line_number);
}

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------
function setCookie(value) {
  localStorage.setItem(`${file_name}typer`,value);

}


</script>
<span id='lineNumber'>#</span>
<textarea onkeyup="getLineNumber(this)" id='input'></textarea>
<div id='data'>x</div><br/>


</body>
</html>


